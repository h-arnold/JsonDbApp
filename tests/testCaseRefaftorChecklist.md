# Test Case Refactor Checklist

Tracking old test suites and cases for migration into the new `tests` framework.

## Unit tests

- [x] **old_tests/unit/Collection/00_CollectionInitialisationTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Initialisation_
    - [x] testCollectionInitialisation
    - [x] testCollectionLazyLoading

- [x] **old_tests/unit/Collection/01_CollectionDataOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Data Operations_
    - [x] testCollectionLoadDataFromDrive
    - [x] testCollectionLoadDataCorruptedFile
    - [x] testCollectionSaveDataToDrive

- [x] **old_tests/unit/Collection/02_CollectionInsertOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Insert Operations_
    - [x] testCollectionInsertOne
    - [x] testCollectionInsertOneWithExplicitId

- [x] **old_tests/unit/Collection/03_CollectionFindOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Find Operations_
    - [x] testCollectionFindOneEmpty
    - [x] testCollectionFindOneById
    - [x] testCollectionFindOneUnsupportedQuery
    - [x] testCollectionFindEmpty
    - [x] testCollectionFindAll
    - [x] testCollectionFindUnsupportedQuery
    - [x] testCollectionFindByFieldMatching
    - [x] testCollectionFindByMultipleFields
    - [x] testCollectionFindByNestedField
    - [x] testCollectionFindByComparisonOperators
    - [x] testCollectionFindOneByFieldMatching

- [x] **old_tests/unit/Collection/04_CollectionUpdateOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Update Operations_
    - [x] testCollectionUpdateOneById
    - [x] testCollectionUpdateOneUnsupportedFilter
    - [x] testCollectionUpdateOneUnsupportedOperators
    - [x] testCollectionUpdateOneByFieldFilter
    - [x] testCollectionUpdateOneByMultipleFieldFilter
    - [x] testCollectionUpdateOneByNestedFieldFilter
    - [x] testCollectionUpdateOneByComparisonFilter
    - [x] testCollectionUpdateOneNoMatch
    - [x] testCollectionUpdateManyReturnsModifiedCount
    - [x] testCollectionReplaceOneById
    - [x] testCollectionReplaceOneByFilter
    - [x] testCollectionReplaceCorrectDocument
    - [x] testCollectionUpdateWithMultipleOperators
    - [x] testCollectionErrorPropagation
    - [x] testCollectionLockingDuringUpdate
    - [x] testCollectionUpdateLogging

- [x] **old_tests/unit/Collection/05_CollectionDeleteOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Delete Operations_
    - [x] testCollectionDeleteOneById
    - [x] testCollectionDeleteOneUnsupportedFilter
    - [x] testCollectionDeleteOneByFieldFilter
    - [x] testCollectionDeleteOneByMultipleFieldFilter
    - [x] testCollectionDeleteOneByNestedFieldFilter
    - [x] testCollectionDeleteOneByComparisonFilter
    - [x] testCollectionDeleteOneNoMatch

- [x] **old_tests/unit/Collection/06_CollectionCountOperationsTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Count Operations_
    - [x] testCollectionCountDocumentsAll
    - [x] testCollectionCountDocumentsUnsupportedFilter
    - [x] testCollectionCountDocumentsByFieldFilter
    - [x] testCollectionCountDocumentsByMultipleFieldFilter
    - [x] testCollectionCountDocumentsByNestedFieldFilter
    - [x] testCollectionCountDocumentsByComparisonFilter
    - [x] testCollectionCountDocumentsNoMatch

- [x] **old_tests/unit/CollectionCoordinator/00_CollectionCoordinatorConstructorValidationTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Constructor Validation_
    - [x] testCollectionCoordinatorConstructorValidation
    - [x] testCollectionCoordinatorValidConstructor
    - [x] testCollectionCoordinatorConfigDefaults
    - [x] testCollectionCoordinatorCustomConfig

- [x] **old_tests/unit/CollectionCoordinator/01_CollectionCoordinatorCoordinateTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Coordinate_
    - [x] testCoordinateHappyPath
    - [x] testCoordinateWithCoordinationDisabled (obsolete - feature removed)
    - [x] testCoordinateWithConflictResolution

- [x] **old_tests/unit/CollectionCoordinator/02_CollectionCoordinatorAcquireOperationLockTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Acquire Operation Lock_
    - [x] testAcquireOperationLockRetrySuccess
    - [x] testAcquireOperationLockRetryFailure

- [x] **old_tests/unit/CollectionCoordinator/03_CollectionCoordinatorModificationTokenTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Modification Token_
    - [x] testValidateModificationTokenNoConflict
    - [x] testValidateModificationTokenConflict

- [x] **old_tests/unit/CollectionCoordinator/04_CollectionCoordinatorConflictResolutionTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Conflict Resolution_
    - [x] testResolveConflictReloadAndRetry

- [x] **old_tests/unit/CollectionCoordinator/05_CollectionCoordinatorUpdateMasterIndexTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Update Master Index Metadata_
    - [x] testUpdateMasterIndexMetadata

- [x] **old_tests/unit/CollectionCoordinator/06_CollectionCoordinatorLockReleaseAndTimeoutTestSuite.js** ✅ Verified
  - [x] _Suite: CollectionCoordinator Lock Release and Timeout_
    - [x] testLockReleasedOnException
    - [x] testCoordinationTimeout

- [x] **old_tests/unit/CollectionMetadataTest.js** ✅ Verified
  - [x] _Suite: CollectionMetadata Constructor_
    - [x] should create metadata with default values when no input provided
    - [x] should create metadata with provided initial values
    - [x] should create metadata with name and fileId parameters
    - [x] should require both name and fileId
    - [x] should throw error for invalid name type
    - [x] should throw error for empty name string
    - [x] should throw error for invalid fileId type
  - [x] _Suite: CollectionMetadata Update Operations_
    - [x] should update lastModified timestamp
    - [x] should increment document count
    - [x] should decrement document count
    - [x] should not allow decrementing below zero
    - [x] should set document count to specific value
    - [x] should throw error for invalid document count in setDocumentCount
    - [x] should update lastModified when document count changes
    - [x] should get and set modificationToken
    - [x] should include modificationToken in toObject output
    - [x] should throw error for invalid modificationToken type
    - [x] should throw error for empty modificationToken
    - [x] should allow null modificationToken
    - [x] should get and set lockStatus
    - [x] should include lockStatus in toObject output
    - [x] should throw error for invalid lockStatus type
    - [x] should validate lockStatus properties
    - [x] should allow null lockStatus
  - [x] _Suite: CollectionMetadata Serialisation_
    - [x] should return plain object from toObject method
    - [x] should include all fields in toObject output
    - [x] should create independent clone
    - [x] should clone with independent timestamps
    - [x] should create instance from object using constructor
    - [x] should create instance using create factory method
    - [x] should throw error for invalid object in constructor
    - [x] should throw error for invalid field values in constructor
  - [x] _Suite: CollectionMetadata Edge Cases_
    - [x] should handle very large document counts
    - [x] should handle partial metadata objects
    - [x] should validate Date objects in input metadata
    - [x] should handle zero document count operations

REMEMBER TO COMMIT AND PUSH YOUR CHANGES ONE A FILE HAS BEEN REFACTORED!

- [x] **old_tests/unit/Database/01_DatabaseInitializationTestSuite.js** ✅ Verified
  - [x] _Suite: Database Initialisation_
    - [x] should create Database with default configuration
    - [x] should create Database with custom configuration
    - [x] should initialise database and create index file
    - [x] should handle initialisation with existing index file

REMEMBER TO COMMIT AND PUSH YOUR CHANGES ONE A FILE HAS BEEN REFACTORED!

- [x] **old_tests/unit/Database/02_CollectionManagementTestSuite.js** ✅ Verified
  - [x] _Suite: Collection Management_
    - [x] should create new collection
    - [x] should access existing collection
    - [x] should auto-create collection when configured
    - [x] should list all collections
    - [x] should delete collection
    - [x] should throw error if collection does not exist and autoCreateCollections is false
    - [x] should handle collection name validation
    - [x] should sanitise invalid collection names when permissive mode enabled
    - [x] should refuse reserved names even after sanitisation
    - [x] should prevent duplicate collections that collide after sanitisation

REMEMBER TO COMMIT AND PUSH YOUR CHANGES ONE A FILE HAS BEEN REFACTORED!

- [x] **old_tests/unit/Database/03_IndexFileStructureTestSuite.js** ✅ Verified
  - [x] _Suite: Index File Structure_
    - [x] should create index file with correct structure
    - [x] should update index file when collections change
    - [x] should synchronise with master index
    - [x] should record sanitised collection names in index file when sanitisation enabled

REMEMBER TO COMMIT AND PUSH YOUR CHANGES ONE A FILE HAS BEEN REFACTORED!

- [x] **old_tests/unit/Database/04_DatabaseMasterIndexIntegrationTestSuite.js** ✅ Verified
  - [x] _Suite: Database Master Index Integration_
    - [x] should integrate with master index on initialisation
    - [x] should co-ordinate collection operations with master index

REMEMBER TO COMMIT AND PUSH YOUR CHANGES ONE A FILE HAS BEEN REFACTORED!

- [x] **old_tests/unit/Database/05_DatabaseBackupIndexTestSuite.js** ✅ Verified
  - [x] _Suite: Database Backup Index Tests_
    - [x] should NOT create index file when backupOnInitialise is false
    - [x] should create index file when backupOnInitialise is true
    - [x] createCollection should not create index file when backup disabled

- [x] **old_tests/unit/DatabaseConfigTest.js** ✅ Verified
  - [x] _Suite: DatabaseConfig Setup - Create Test Environment_
    - [x] should create test folder for DatabaseConfig tests
  - [x] _Suite: DatabaseConfig Creation and Default Values_
    - [x] should create DatabaseConfig with default values
    - [x] should create DatabaseConfig with custom values
    - [x] should merge custom config with defaults
    - [x] should preserve sanitisation flag through clone and serialization
  - [x] _Suite: DatabaseConfig Validation_
    - [x] should validate lock timeout parameter
    - [x] should validate retryAttempts and retryDelayMs parameters
    - [x] should validate log level parameter
    - [x] should validate boolean parameters
    - [x] should validate rootFolderId parameter
  - [x] _Suite: DatabaseConfig Cleanup - Remove Test Resources_
    - [x] should clean up test folders
  - [x] _Suite: DatabaseConfig lockTimeout validation_
    - [x] testValidMinimumLockTimeout
    - [x] testTooLowLockTimeoutThrowsError

- [x] **old_tests/unit/DatabaseInitializationRefactorTest.js** ✅ Verified
  - [x] _Suite: Database createDatabase() Method (No Setup)_
    - [x] should create database with fresh MasterIndex
  - [x] _Suite: Database createDatabase() Method (Exists)_
    - [x] should throw error if MasterIndex already exists
  - [x] _Suite: Database initialise() Refactor_
    - [x] should initialise from MasterIndex only
    - [x] should throw error if MasterIndex is missing
    - [x] should throw error if MasterIndex is corrupted
    - [x] should persist sanitised collection names to MasterIndex when flag enabled
  - [x] _Suite: Database recoverDatabase() Method_
    - [x] should recover database from backup index file
    - [x] should throw error if backup file is invalid
  - [x] _Suite: Collection Methods No Fallback_
    - [x] should access collection from MasterIndex only
    - [x] should throw error if collection not in MasterIndex

- [x] **old_tests/unit/DbLockService/01_LockServiceConstructorTestSuite.js** ✅ Verified
  - [x] _Suite: LockService Constructor_
    - [x] testDefaultTimeout
    - [x] testCustomTimeout
    - [x] testInvalidConfigType
    - [x] testInvalidTimeoutType

- [x] **old_tests/unit/DbLockService/02_LockServiceScriptLockTestSuite.js** ✅ Verified
  - [x] _Suite: LockService Script Lock Operations_
    - [x] testAcquireAndReleaseScriptLock
    - [x] testReleaseWithoutAcquireThrows
    - [x] testInvalidTimeoutThrows

- [x] **old_tests/unit/DbLockService/03_LockServiceScriptLockTimeoutTestSuite.js** ✅ Verified
  - [x] _Suite: LockService Script Lock Timeout_
    - [x] testScriptLockTimeoutThrows

- [x] **old_tests/unit/DocumentOperations/01_DocumentOperationsConstructorTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Constructor_
    - [x] should create DocumentOperations with valid collection reference

- [x] **old_tests/unit/DocumentOperations/02_DocumentOperationsInsertTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Insert Operations_
    - [x] should insert document with automatic ID generation
    - [x] should insert document with provided ID when valid
    - [x] should throw error when inserting document with duplicate ID
    - [x] should throw error when inserting invalid document

- [x] **old_tests/unit/DocumentOperations/03_DocumentOperationsFindTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Find Operations_
    - [x] should find document by valid ID
    - [x] should return null when document not found by ID
    - [x] should throw error when finding with invalid ID
    - [x] should find all documents when collection has content
    - [x] should return empty array when finding all documents in empty collection

- [x] **old_tests/unit/DocumentOperations/04_DocumentOperationsUpdateTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Update Operations_
    - [x] should update existing document by ID
    - [x] should return error result when updating non-existent document
    - [x] should throw error when updating with invalid parameters
    - [x] should update document with operators by ID
    - [x] should update documents matching query with single match
    - [x] should update documents matching query with multiple matches
    - [x] should throw error when updateByQuery finds no matches
    - [x] should replace document by ID
    - [x] should replace documents matching query
    - [x] should integrate with UpdateEngine for operator-based updates
    - [x] should throw error for unsupported update operators
    - [x] should throw error when no operators provided to updateDocumentWithOperators

- [x] **old_tests/unit/DocumentOperations/05_DocumentOperationsDeleteTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Delete Operations_
    - [x] should delete existing document by ID
    - [x] should return error result when deleting non-existent document
    - [x] should throw error when deleting with invalid ID

- [x] **old_tests/unit/DocumentOperations/06_DocumentOperationsUtilityTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Utility Operations_
    - [x] should count documents correctly
    - [x] should check document existence correctly
    - [x] should throw error when checking existence with invalid ID
    - [x] should generate valid document IDs

- [x] **old_tests/unit/DocumentOperations/07_DocumentOperationsQueryEnhancementTest.js** ✅ Verified
  - [x] _Suite: DocumentOperations Query Enhancement_
    - [x] should find document by field-based query with exact match
    - [x] should find document by comparison operator query
    - [x] should find document by logical AND query
    - [x] should find document by logical OR query
    - [x] should find document by nested field query
    - [x] should find multiple documents by query
    - [x] should count documents by query accurately
    - [x] should handle QueryEngine integration errors properly
    - [x] should handle empty results for non-matching queries
    - [x] should handle large result sets efficiently
    - [x] should maintain backwards compatibility with existing ID-based methods
    - [x] should validate queries and propagate errors properly

- [x] **old_tests/unit/FileOperationsTest.js** ✅ Verified _(rechecked 2026-02-02)_
  - [x] _Suite: FileOperations Setup - Create Test Files_
    - [x] should create test folder in Drive root
    - [x] should create initial test file with JSON content
    - [x] should verify test file can be accessed
  - [x] _Suite: FileOperations Functionality_
    - [x] should read file content from Drive using real file ID
    - [x] should write data to existing Drive file
    - [x] should create new file in test folder
    - [x] should check if file exists in Drive
    - [x] should delete file from Drive
    - [x] should retrieve file metadata from Drive
  - [x] _Suite: FileOperations Error Handling_
    - [x] should handle Drive API quota exceeded error with retry
    - [x] should handle Drive API permission denied error
    - [x] should handle Drive API file not found error
    - [x] should retry operations on transient failures
    - [x] should handle malformed JSON in file content
    - [x] should handle corrupted files with partial JSON and date strings
    - [x] should handle files with invalid JSON that could trigger double-parsing detection
    - [x] should handle empty files gracefully without date processing
  - [x] _Suite: FileOperations Edge Cases_
    - [x] should handle very large file content gracefully
    - [x] should handle special characters in file names and content
    - [x] should handle empty files and null data appropriately
  - [x] _Suite: FileOperations Cleanup - Remove Test Files_
    - [x] should delete all created test files
    - [x] should delete all created test folders
    - [x] should reset test data globals
  - [x] _Suite: FileOperations Date Handling_
    - [x] should preserve Date objects through write-read cycle
    - [x] should store Date objects as ISO strings in actual file content
    - [x] should handle arrays with multiple Date objects
    - [x] should handle deeply nested Date objects
    - [x] should handle mixed Date objects and ISO strings correctly
    - [x] should handle edge cases with invalid date-like strings
    - [x] should handle Date objects with various time zones and precision

- [x] **old_tests/unit/FileServiceTest.js** ✅ Verified _(rechecked 2026-02-02)_
  - [x] _Suite: FileService Setup - Create Test Resources_
    - [x] should create test folder in Drive root
    - [x] should create initial test file with JSON content
    - [x] should initialise mock FileOperations for dependency injection
  - [x] _Suite: FileService Functionality_
    - [x] should initialise with FileOperations dependency
    - [x] should read file through optimised interface
    - [x] should write file through optimised interface
    - [x] should create file through optimised interface
    - [x] should check file existence through optimised interface
    - [x] should get file metadata through optimised interface
  - [x] _Suite: FileService Optimisation_
    - [x] should batch multiple read operations when possible
    - [x] should optimise metadata retrieval for multiple files
    - [x] should handle mixed success and failure in batch operations
    - [x] should implement intelligent caching for frequently accessed files
  - [x] _Suite: FileService Error Recovery_
    - [x] should implement exponential backoff for quota limits
    - [x] should gracefully degrade batch operations on partial failures
    - [x] should implement circuit breaker pattern for failing operations
  - [x] _Suite: FileService Integration_
    - [x] should coordinate operations between FileOperations and FileService
    - [x] should minimise Drive API calls through intelligent coordination
    - [x] should maintain consistency during concurrent file operations
  - [x] _Suite: FileService Cleanup - Remove Test Files_
    - [x] should delete all created test files
    - [x] should delete all created test folders
    - [x] should reset test data globals

- [x] **old_tests/unit/MasterIndexTest.js** ✅ Verified
  - [x] _Suite: MasterIndex Functionality_
    - [x] should initialise master index with default configuration
    - [x] should persist master index to ScriptProperties
    - [x] should load existing master index from ScriptProperties
    - [x] should update collection metadata correctly
    - [x] should remove a collection and persist the removal
    - [x] should return CollectionMetadata instance from getCollection
    - [x] should accept CollectionMetadata instance in addCollection
    - [x] should return CollectionMetadata instances from getCollections
    - [x] should preserve CollectionMetadata properties through persistence
    - [x] should update CollectionMetadata instance properties correctly
    - [x] should throw error if MasterIndex is corrupted
  - [x] _Suite: Conflict Detection and Resolution_
    - [x] should generate unique modification tokens
    - [x] should detect conflicts using modification tokens
    - [x] should resolve conflicts with last-write-wins strategy
    - [x] should track modification history for debugging
    - [x] should validate modification token format
  - [x] _Suite: MasterIndex Integration_
    - [x] should coordinate locking and conflict detection
    - [x] should handle complete operation lifecycle
    - [x] should maintain CollectionMetadata integrity during conflict resolution
    - [x] should handle CollectionMetadata in complete operation lifecycle with persistence

- [x] **old_tests/unit/QueryEngineTest.js** ✅ Verified
  - [x] _Suite: QueryEngine Basic Functionality_
    - [x] should have QueryEngine class available
    - [x] should create QueryEngine instance
    - [x] should have executeQuery method
    - [x] should match all documents with empty query
    - [x] should match documents by simple field equality
    - [x] should match documents by numeric field equality
    - [x] should match documents by boolean field equality
    - [x] should match documents by nested field access
    - [x] should match documents by deeply nested field access
    - [x] should return empty array for non-matching query
    - [x] should handle null and undefined field values
    - [x] should handle documents with missing fields
  - [x] _Suite: QueryEngine Comparison Operators_
    - [x] should support explicit $eq operator with strings
    - [x] should support explicit $eq operator with numbers
    - [x] should support explicit $eq operator with booleans
    - [x] should support $gt operator with numbers
    - [x] should support $lt operator with numbers
    - [x] should support $gt operator with dates
    - [x] should support $lt operator with dates
    - [x] should support comparison operators with nested fields
    - [x] should handle comparison operators with non-matching values
  - [x] _Suite: QueryEngine Logical Operators_
    - [x] should support explicit $and operator
    - [x] should support $or operator
    - [x] should support implicit AND with multiple fields
    - [x] should support nested logical operators
    - [x] should support $or with comparison operators
    - [x] should handle empty $and conditions
    - [x] should handle empty $or conditions
    - [x] should support complex multi-field implicit AND
  - [x] _Suite: QueryEngine Error Handling_
    - [x] should throw InvalidQueryError for invalid query structure
    - [x] should throw InvalidQueryError for unsupported operators
    - [x] should throw error for null or undefined documents array
    - [x] should handle malformed logical operators gracefully
    - [x] should provide clear error messages for query validation failures
  - [x] _Suite: QueryEngine Edge Cases_
    - [x] should handle empty documents array
    - [x] should handle documents with null values
    - [x] should handle documents with deeply nested null values
    - [x] should handle very deeply nested field access
    - [x] should handle numeric field names and special characters
    - [x] should handle large number of documents efficiently

- [x] **old_tests/unit/TestFrameworkTest.js** ✅ Verified
  - [x] _Suite: TestFramework Tests_
    - [x] testAssertionUtilities
    - [x] testAssertionThrows
    - [x] testTestSuiteFunctionality
  - [x] _Suite: TestSuite_
    - [x] dummyTest

- [x] **old_tests/unit/UpdateEngineTest.js** ✅ Verified
  - [x] _Suite: UpdateEngine Tests_
    - [x] testUpdateEngineSetStringField
    - [x] testUpdateEngineSetCreatesDeepPath
    - [x] testUpdateEngineIncPositive
    - [x] testUpdateEngineIncNegative
    - [x] testUpdateEngineMulNumber
    - [x] testUpdateEngineMinNumeric
    - [x] testUpdateEngineMaxValue
    - [x] testUpdateEngineUnsetSimpleField
    - [x] testUpdateEngineUnsetNestedField
    - [x] testUpdateEnginePushArrayValue
    - [x] testUpdateEnginePullArrayValue
    - [x] testUpdateEngineAddToSetUnique
    - [x] testUpdateEngineInvalidOperatorThrows
    - [x] testSetVariousDataTypes
    - [x] testSetOnNonExistentTopLevelField
    - [x] testIncOnNonNumericThrows
    - [x] testMulOnNonNumericThrows
    - [x] testMinOnNonComparableThrows
    - [x] testMaxOnNonComparableThrows
    - [x] testMultipleOperatorsInSingleUpdate
    - [x] testSetCanChangeFieldType
    - [x] testNumericOperatorsPreserveNumericType
    - [x] testSetNullAndUndefinedBehaviour
    - [x] testIncExtremeValues
    - [x] testMinOnEqualValueNoChange
    - [x] testMaxOnEqualValueNoChange
    - [x] testEmptyUpdateObjectThrows
    - [x] testUpdateObjectWithNoDollarOperatorsThrows
    - [x] testUnsetSimpleField
    - [x] testUnsetNestedField
    - [x] testUnsetNonExistentFieldNoError
    - [x] testUnsetArrayElementByIndex
    - [x] testUnsetDeepNestedPath
    - [x] testDocumentStructureAfterUnset
    - [x] testPushSingleValue
    - [x] testPushMultipleValues
    - [x] testPullByValueEquality
    - [x] testAddToSetUniqueOnly
    - [x] testAddToSetMultipleUnique
    - [x] testAddToSetDuplicatesIgnored
    - [x] testPushNestedArray
    - [x] testPullNestedArray
    - [x] testArrayPositionSpecifier
    - [x] testPushOnNonArrayThrows
    - [x] testPullOnNonArrayThrows
    - [x] testAddToSetOnNonArrayThrows

- [x] **old_tests/unit/UtilityTests/ComparisonUtilsTest.js** ✅ Verified
  - [x] _Suite: ComparisonUtils Tests_
    - [x] testEqualsPrimitivesAndStrict
    - [x] testEqualsDates
    - [x] testEqualsDeepObjectsAndArrays
    - [x] testEqualsArrayContainsScalarToggle
    - [x] testCompareOrderingNumbers
    - [x] testCompareOrderingStrings
    - [x] testCompareOrderingDates
    - [x] testCompareOrderingNonComparable
    - [x] testApplyOperatorsSingle
    - [x] testApplyOperatorsMultipleAndUnsupported
    - [x] testIsOperatorObject
    - [x] testSubsetMatchPlainFields
    - [x] testSubsetMatchWithOperators
    - [x] testSubsetMatchMixed
    - [x] testSubsetMatchOperatorObjectDirect

- [x] **old_tests/unit/UtilityTests/EnvironmentTest.js** ✅ Verified
  - [x] _Suite: Environment Tests_
    - [x] testClaspConfiguration (legacy TestFramework assertion retired; Vitest harness does not expose TestFramework)
    - [x] testDriveAccess

- [x] **old_tests/unit/UtilityTests/ErrorHandlerTest.js** ✅ Verified
  - [x] _Suite: ErrorHandler Tests_
    - [x] testErrorHandlerErrorTypes
    - [x] testErrorCreation
    - [x] testErrorValidation
    - [x] testAllErrorTypesCreation

- [x] **old_tests/unit/UtilityTests/GASDBLoggerTest.js** ✅ Verified
  - [x] _Suite: GASDBLogger Tests_
    - [x] testLoggerBasicFunctionality
    - [x] testLoggerLevels
    - [x] testLoggerComponentLogger

- [x] **old_tests/unit/UtilityTests/IdGeneratorTest.js** ✅ Verified
  - [x] _Suite: IdGenerator Tests_
    - [x] testIdGeneratorBasicFunctionality
    - [x] testIdGeneratorUniqueness
    - [x] testIdGeneratorFormats
    - [x] testIdGeneratorCustomGenerator

- [x] **old_tests/unit/UtilityTests/ObjectUtilsTest.js** ✅ Verified
  - [x] _Suite: ObjectUtils Tests_
    - [x] testObjectUtilsDeepClonePrimitives
    - [x] testObjectUtilsDeepCloneDateObjects
    - [x] testObjectUtilsDeepCloneArrays
    - [x] testObjectUtilsDeepCloneNestedArrays
    - [x] testObjectUtilsDeepCloneObjects
    - [x] testObjectUtilsDeepCloneComplexNestedStructures
    - [x] testObjectUtilsConvertDateStringsPrimitives
    - [x] testObjectUtilsConvertDateStringsISOStrings
    - [x] testObjectUtilsConvertDateStringsNonISOStrings
    - [x] testObjectUtilsConvertDateStringsExistingDates
    - [x] testObjectUtilsConvertDateStringsArrays
    - [x] testObjectUtilsConvertDateStringsObjects
    - [x] testObjectUtilsConvertDateStringsNestedStructures
    - [x] testObjectUtilsIsISODateStringValidation
    - [x] testObjectUtilsSerialiseSimpleObjects
    - [x] testObjectUtilsSerialiseWithDates
    - [x] testObjectUtilsSerialiseArraysWithDates
    - [x] testObjectUtilsSerialiseNullUndefined
    - [x] testObjectUtilsDeserialiseJsonString
    - [x] testObjectUtilsDeserialiseWithDateRestoration
    - [x] testObjectUtilsDeserialiseArraysWithDates
    - [x] testObjectUtilsDeserialiseInvalidJson
    - [x] testObjectUtilsDeserialiseNonStringInput
    - [x] testObjectUtilsDeserialiseClassInstances
    - [x] testObjectUtilsRoundTripDatabaseConfigSanitisationFlag
    - [x] testObjectUtilsRoundTripSerialisation
    - [x] testObjectUtilsRoundTripComplexStructures
    - [x] testObjectUtilsRoundTripWithNaNAndInfinity
    - [x] testObjectUtilsEdgeCases
    - [x] testObjectUtilsSpecialObjectTypes

- [x] **old_tests/unit/UtilityTests/ValidationUtilsTest.js** ✅ Verified
  - [x] _Suite: ValidationUtils Tests_
    - [x] testValidationUtilsValidateRequired
    - [x] testValidationUtilsValidateType
    - [x] testValidationUtilsValidateNonEmptyString
    - [x] testValidationUtilsValidateString
    - [x] testValidationUtilsValidateObject
    - [x] testValidationUtilsValidateBoolean
    - [x] testValidationUtilsValidateArray
    - [x] testValidationUtilsValidateNonEmptyArray
    - [x] testValidationUtilsValidateNumber
    - [x] testValidationUtilsValidateInteger
    - [x] testValidationUtilsValidatePositiveNumber
    - [x] testValidationUtilsValidateNonNegativeNumber
    - [x] testValidationUtilsValidateRange
    - [x] testValidationUtilsValidateFunction
    - [x] testValidationUtilsValidateEnum
    - [x] testValidationUtilsValidateObjectProperties
    - [x] testValidationUtilsValidatePattern
    - [x] testValidationUtilsValidateOptional
    - [x] testValidationUtilsValidateAll
    - [x] testValidationUtilsValidateAny
    - [x] testValidateErrorMessages
    - [x] testValidationUtilsValidatePlainObject
    - [x] testValidationUtilsIsPlainObject
    - [x] testValidationUtilsValidateUpdateObject

## Validation tests

- [x] **old_tests/validation/00_ComparisonOperators.js** ✅ Verified → Refactored to tests/unit/validation/eq-operator.test.js, gt-operator.test.js, lt-operator.test.js
  - [x] _Suite: $eq Equality Operator Tests_
    - [x] should match string values exactly
    - [x] should match numeric values exactly
    - [x] should match zero values correctly
    - [x] should match boolean values exactly
    - [x] should match null values correctly
    - [x] should match Date objects by exact timestamp
    - [x] should match nested objects exactly
    - [x] should distinguish empty string from null
    - [x] should distinguish zero from false
    - [x] should be case sensitive for strings
    - [x] should match nested fields with dot notation
    - [x] should match deep nested fields
    - [x] should handle non-existent nested paths
  - [x] _Suite: $gt Greater Than Operator Tests_
    - [x] should compare integers correctly
    - [x] should compare floats correctly
    - [x] should handle mixed integer and float comparison
    - [x] should handle negative numbers correctly
    - [x] should handle zero boundary cases
    - [x] should compare Date objects chronologically
    - [x] should compare strings lexicographically
    - [x] should handle case sensitivity in string comparison
    - [x] should not compare number with string
    - [x] should handle null values in comparison
    - [x] should handle missing fields in comparison
  - [x] _Suite: $lt Less Than Operator Tests_
    - [x] should compare integers correctly
    - [x] should compare floats correctly
    - [x] should handle negative number boundaries
    - [x] should handle zero boundary cases
    - [x] should compare Date objects chronologically
    - [x] should compare strings lexicographically
    - [x] should handle large number boundaries
    - [x] should handle floating point precision
    - [x] should handle null in less than comparison
    - [x] should handle missing fields correctly

- [x] **old_tests/validation/01_LogicalOperators.js** ✅ Verified → Refactored to tests/unit/validation/and-operator.test.js, or-operator.test.js, combined-logical-operators.test.js
  - [x] _Suite: $and Logical AND Operator Tests_
    - [x] should match documents satisfying both field conditions
    - [x] should match documents satisfying multiple field conditions
    - [x] should work with mixed comparison operators
    - [x] should handle nested $and operations
    - [x] should match all documents with empty $and array
    - [x] should handle single condition in $and
    - [x] should return no results for contradictory conditions
  - [x] _Suite: $or Logical OR Operator Tests_
    - [x] should match documents satisfying either field condition
    - [x] should match documents satisfying any of multiple conditions
    - [x] should work with mixed comparison operators
    - [x] should handle nested $or operations
    - [x] should match no documents with empty $or array
    - [x] should handle single condition in $or
    - [x] should handle duplicate conditions in $or
  - [x] _Suite: Combined Logical Operations Tests_
    - [x] should handle $and containing $or clauses
    - [x] should handle $or containing $and clauses
    - [x] should handle complex nested logical operations
    - [x] should handle implicit AND with explicit $and
    - [x] should handle implicit AND with explicit $or
    - [x] should handle multiple fields with multiple logical operators
  - [x] _Suite: Logical Operator Error Handling Tests_
    - [x] should throw error for invalid $and structure
    - [x] should throw error for invalid $or structure

- [x] **old_tests/validation/02_FieldUpdateOperators.js** ✅ Verified → Refactored to tests/unit/validation/set-operator.test.js, unset-operator.test.js
  - [x] _Suite: $set Basic Field Setting Tests_
    - [x] should overwrite existing string values
    - [x] should overwrite existing numeric values
    - [x] should overwrite existing boolean values
    - [x] should overwrite existing array values
    - [x] should overwrite existing object values
    - [x] should create new top-level fields
    - [x] should set nested fields using dot notation
    - [x] should set deeply nested fields
  - [x] _Suite: $set Type Changes Tests_
    - [x] should change string field to number
    - [x] should change number field to array
    - [x] should change object field to primitive
    - [x] should change null field to non-null value
  - [x] _Suite: $set Object Creation Tests_
    - [x] should create nested object structure via dot notation
    - [x] should perform partial object updates
    - [x] should handle mixed existing and new nested fields
  - [x] _Suite: $set Edge Cases Tests_
    - [x] should handle _id field setting appropriately
    - [x] should handle undefined vs null assignment
    - [x] should distinguish empty string from null assignment
  - [x] _Suite: $unset Basic Field Removal Tests_
    - [x] should remove top-level fields
    - [x] should remove multiple top-level fields
    - [x] should remove nested fields using dot notation
    - [x] should remove deeply nested fields
  - [x] _Suite: $unset Object Structure Preservation Tests_
    - [x] should leave parent object when removing field
    - [x] should leave empty object when removing all fields
    - [x] should maintain object hierarchy when removing nested field
  - [x] _Suite: $unset Edge Cases Tests_
    - [x] should handle unsetting non-existent field gracefully
    - [x] should handle _id field unset appropriately
    - [x] should handle unsetting field in non-existent parent object

- [x] **old_tests/validation/03_NumericUpdateOperators.js** ✅ Verified → Refactored to tests/unit/validation/inc-operator.test.js, mul-operator.test.js, min-operator.test.js, max-operator.test.js
  - [x] _Suite: $inc Basic Incrementation Tests_
    - [x] should increment positive integer values
    - [x] should increment positive decimal values
    - [x] should decrement with negative increment values
    - [x] should handle zero increment as no-op
    - [x] should handle fractional increments correctly
  - [x] _Suite: $inc Field Creation Tests_
    - [x] should create non-existent field with increment value
    - [x] should create non-existent decimal field with increment value
    - [x] should create nested object structure when incrementing nested field
  - [x] _Suite: $inc Type Validation Tests_
    - [x] should error when incrementing non-numeric field
    - [x] should error when incrementing boolean field
    - [x] should error with non-numeric increment value
    - [x] should error with boolean increment value
    - [x] should error with null increment value
  - [x] _Suite: $inc Boundary Testing Tests_
    - [x] should handle large number increments
    - [x] should maintain floating point precision
    - [x] should handle near-maximum safe integer values
  - [x] _Suite: $mul Basic Multiplication Tests_
    - [x] should multiply by positive integer
    - [x] should multiply by positive decimal
    - [x] should multiply by negative value
    - [x] should set field to zero when multiplying by zero
    - [x] should multiply by fractional values
  - [x] _Suite: $mul Field Creation Tests_
    - [x] should create non-existent field as 0 when multiplied
    - [x] should create nested non-existent field as 0
  - [x] _Suite: $mul Type Validation Tests_
    - [x] should error when multiplying non-numeric field
    - [x] should error with non-numeric multiplier
  - [x] _Suite: $min Value Comparison Tests_
    - [x] should replace field when new value is smaller
    - [x] should not change field when current value is smaller
    - [x] should not change field when values are equal
    - [x] should handle mixed integer/float comparisons
  - [x] _Suite: $min Field Creation Tests_
    - [x] should create non-existent field with min value
  - [x] _Suite: $min Type Handling Tests_
    - [x] should handle Date comparisons correctly
    - [x] should handle string comparisons lexicographically
    - [x] should handle type mismatches appropriately
  - [x] _Suite: $min Edge Cases Tests_
    - [x] should handle null vs number comparisons
    - [x] should handle undefined field appropriately
  - [x] _Suite: $max Value Comparison Tests_
    - [x] should replace field when new value is larger
    - [x] should not change field when current value is larger
    - [x] should not change field when values are equal
    - [x] should handle mixed integer/float comparisons
  - [x] _Suite: $max Field Creation Tests_
    - [x] should create non-existent field with max value
  - [x] _Suite: $max Boundary Testing Tests_
    - [x] should handle maximum safe integer values
    - [x] should handle date range maximums

- [x] **old_tests/validation/04_ArrayUpdateOperators.js** ✅ Verified → Refactored to tests/unit/validation/push-operator.test.js, pull-operator.test.js
  - [x] _Suite: $push Operator Tests_
    - [x] should append a single value to an existing array
    - [x] should append an object value to an array
    - [x] should create array when pushing to a non-existent field
    - [x] should create array when pushing to a nested non-existent field
    - [x] should throw error when pushing to a non-array field
    - [x] should push multiple values with $each modifier
    - [x] should handle empty array with $each modifier
    - [x] should push array of objects with $each
  - [x] _Suite: $pull Operator Tests_
    - [x] should remove a specific value from an array
    - [x] should remove all occurrences of a value
    - [x] should handle pulling from a non-array field gracefully
    - [x] should handle pulling a non-existent value
    - [x] should handle pulling from an empty array
    - [x] should remove numeric values matching operator object
    - [x] should remove objects matching mixed field and operator predicates
    - [x] should remove exact matching object in array
    - [x] should not match operator object against object element directly
    - [x] should not match when predicate references missing field
    - [x] should match null equality correctly
    - [x] should compare dates by timestamp for operator removal
    - [x] should remove object using partial predicate
    - [x] should report no modification when pulling from non-existent array field
    - [x] should report no modification when operator predicate matches nothing

- [x] **old_tests/validation/05_ArrayAddToSetValidation.js** ✅ Verified → Refactored to tests/unit/validation/addtoset-operator.test.js
  - [x] _Suite: $addToSet Operator Tests_
    - [x] should add a value to a set if it is not already present
    - [x] should not add a value to a set if it is already present
    - [x] should add a unique object to an array of objects
    - [x] should not add a duplicate object to an array of objects
    - [x] should add multiple unique values with $each
    - [x] should create an array field if it does not exist
    - [x] should throw an error when used on a non-array field

